# OpenTelemetry Demo - Official Helm Chart Values
# https://github.com/open-telemetry/opentelemetry-helm-charts/tree/main/charts/opentelemetry-demo

# Demo components configuration
components:
  # Frontend Proxy (Envoy) - Main entry point
  frontendProxy:
    enabled: true
    service:
      type: ClusterIP
      port: 8080
    ingress:
      enabled: true
      ingressClassName: alb
      annotations:
        alb.ingress.kubernetes.io/scheme: internet-facing
        alb.ingress.kubernetes.io/target-type: ip
        alb.ingress.kubernetes.io/listen-ports: '[{"HTTPS":443}]'
        alb.ingress.kubernetes.io/certificate-arn: arn:aws:acm:eu-west-1:715841344657:certificate/451d7634-db6f-4e55-9a5f-43de4c2a6722
        alb.ingress.kubernetes.io/ssl-redirect: '443'
        external-dns.alpha.kubernetes.io/hostname: otel.ticarethanem.net
      hosts:
        - host: otel.ticarethanem.net
          paths:
            - path: /
              pathType: Prefix
              port: 8080

  # All demo microservices
  frontend:
    enabled: true

  adService:
    enabled: true

  cartService:
    enabled: true

  checkoutService:
    enabled: true

  currencyService:
    enabled: true

  emailService:
    enabled: true

  paymentService:
    enabled: true

  productCatalogService:
    enabled: true

  recommendationService:
    enabled: true

  shippingService:
    enabled: true

  accountingService:
    enabled: true

  frauddetectionService:
    enabled: true

  quoteService:
    enabled: true

  imageprovider:
    enabled: true

  # Kafka for event streaming
  kafka:
    enabled: true
    resources:
      limits:
        memory: 700Mi

# OpenTelemetry Collector (subchart)
opentelemetry-collector:
  enabled: true
  mode: deployment
  nameOverride: otelcol

# Jaeger for trace visualization (subchart)
jaeger:
  enabled: true
  provisionDataStore:
    cassandra: false
  allInOne:
    enabled: true
    args:
      - "--memory.max-traces"
      - "10000"
      - "--query.base-path=/jaeger/ui"

# Prometheus (subchart)
prometheus:
  enabled: true
  server:
    retention: "2h"
    persistentVolume:
      enabled: false

# Grafana (subchart)
grafana:
  enabled: true
  adminPassword: "admin"
